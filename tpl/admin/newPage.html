<div class="row">
    <div class="span12">
    	<h2> Новая страница</h2>
    	<div class="well">
    		<form id="newPage" method="post">
				<fieldset>
					<label>Имя страницы</label>
					<input type="text" name="page_name" placeholder="">
					<label>Имя страницы на анг. для Url</label>
					<input type="text" name="url_name" placeholder="">
					<% if (menu) { %>
						<label>Пункт меню</label>
						<select name="menu_id">
							<% for (key in menu) { %>
							  <option value="<%=menu[key]._id%>"><%=menu[key].name%></option>
							<% } %>
						</select>
					<% } %>
					<label>Title</label>
					<input type="text" class="span10" name="title" placeholder="">
					<label>Description</label>
					<textarea type="text" class="span10" name="descr" placeholder=""></textarea>
					<label>Body</label>
					<textarea type="text" class="span10" id="code" name="body" placeholder=""></textarea>
					<label class="checkbox">
						<input type="checkbox" name="show"> Показывать
					</label>
					<button type="submit" class="btn">Добавить</button>
				</fieldset>
			</form>
    	</div>
    </div>
</div>
<script>
	$(function() {
		$('form#newPage').validate({
			rules: {
				page_name: "required"
			},
			messages: {
				page_name: {
					required: "Введите название страницы",
				}
			}			
		})
	});

      // Define an extended mixed-mode that understands vbscript and
      // leaves mustache/handlebars embedded templates in html mode
      var mixedMode = {
        name: "htmlmixed",
        scriptTypes: [{matches: /\/x-handlebars-template|\/x-mustache/i,
                       mode: null},
                      {matches: /(text|application)\/(x-)?vb(a|script)/i,
                       mode: "vbscript"}]
      };
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {mode: mixedMode, tabMode: "indent"});	
</script>